<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/nav.css">
    <link rel="stylesheet" href="./css/admin.css">
</head>
<body>


    {{!-- // --------------------------------------------- HORIZONTAL NAV BAR STARTS------------------------------------------------- // --}}

    <nav class="navbar navbar-expand-lg styleNav" style="background-color: #000000;">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">


    {{!-- // --------------------------------------------- Restaurant Logo & Name ------------------------------------------------- // --}}
            <ul class="navbar-brand navbar-nav mr-auto">
                <a  class="navbar-brand" href="/">
                    <img src="Images/Logo.png" style="height:7em">
                </a>
            </ul>


    {{!-- // --------------------------------------------- BUTTONS ------------------------------------------------- // --}}
            <ul class="navbar-nav">

    {{!-- // --------------------------------------------- HOME ------------------------------------------------- // --}}
                <li class="nav-item active">
                    <a class="nav-link xyz" id="home" href="/">
                    Home
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-house" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
                        <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
                    </svg>
                    </a>
                </li> 
            </ul>
    {{!---------------------------------------------------UserName----------------------------------------------- --}}
        <a  class="nav-link xyz" href="/">
            <img id="addEmpImage" style="height: 2em; border-radius: 50%" src="employee/give/{{id}}">
            {{name}}
        </a>

        <ul class="navbar-nav">

    {{!-- // --------------------------------------------- LOGOUT ------------------------------------------------- // --}}    
            <li class="nav-item active">
                <a id="logout" class="nav-link xyz" href="/root/logout">
                    Logout
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-door-open" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M1 15.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5zM11.5 2H11V1h.5A1.5 1.5 0 0 1 13 2.5V15h-1V2.5a.5.5 0 0 0-.5-.5z"/>
                    <path fill-rule="evenodd" d="M10.828.122A.5.5 0 0 1 11 .5V15h-1V1.077l-6 .857V15H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117z"/>
                    <path d="M8 9c0 .552.224 1 .5 1s.5-.448.5-1-.224-1-.5-1-.5.448-.5 1z"/>
                    </svg>
                </a>
            </li>
            </ul>

        </div>
    </nav>

    {{!-----------------------------------------------------HORIZONTAL NAV BAR ENDS -----------------------------------------------}}







    {{!----------------------------------------------------VERTICAL NAV BAR STARTS ------------------------------------------------}}
    <ul class="vertical">
        <li>
            {{#if hideShow.team}}
            <a id="one" href="#" class="active">
            {{else}}
            <a id="one" href="#">
            {{/if}}
                TEAM <img src="./Images/team.png" height="30">
            </a>
        </li>
        <li>
            {{#if hideShow.menu}}
            <a id="two" class="active" href="#">
            {{else}}
            <a id="two" href="#">
            {{/if}}
                MENU <img src="./Images/menu.png" height="30">
            </a>
        </li>
        <li>
            {{#if hideShow.jobs}}
            <a id="three" href="#" class="active">
            {{else}}
            <a id="three" href="#">
            {{/if}}           
                JOBS <img src="./Images/cook.png" height="30">
            </a>
        </li>
        <li>
            {{#if hideShow.customers}}
            <a id="four" class="active" href="#">
            {{else}}
            <a id="four" href="#">
            {{/if}}
                CUSTOMERS <img src="./Images/customers.png" height="30">
            </a>
        </li>
        <li>
            {{#if hideShow.orders}}
            <a id="five" class="active" href="#">
            {{else}}
            <a id="five" href="#">
            {{/if}}
                ORDERS <img src="./Images/orders.png" height="30">
            </a>
        </li>
    </ul>
    {{!----------------------------------------------------VERTICAL NAV BAR ENDS ------------------------------------------------}}




























    <div class="afternav">
        <h1 align="center">Welcome Food Buff Admin</h1> 
        <br> <br>

        {{#if hideShow.team}} <div class="employee show">  {{else}} <div class="employee hide">{{/if}}
            <h3>Your High Powered Team</h3>
            {{!---------------------------------------------------- ADD IN EMPLOYEE MODAL--------------------------------------------------}}

            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addEmployee">Add Employee</button>

            <div class="modal fade" id="addEmployee" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">ADD AN EMPLOYEE</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/admin/addEmployee" method="POST" enctype="multipart/form-data">
                        {{#if salary}}
                            <select name="jobTitle" required>
                                {{#each salary as |item|}}
                                    <option value="{{item.jobTitle}}">{{item.jobTitle}}</option>
                                {{/each}}
                            </select>
                        {{/if}}
                        <input type="text" name="name" placeholder="Name" required>
                        <input type="tel" name="phoneNumber" placeholder="Contact Number" required>
                        <input type="text" name="resAdd" placeholder="Address" required> <br>
                        <input type="password" name="password" placeholder="password" required>  <br>
                        <input type="file" name="empImage" required>

                        <input type="submit">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
            </div>

            {{!-----------------------------------------------------------------------------------------------------------------------------------------------}}

            

            {{#if employee}}
                    {{#each employee as |jobs|}}
                        <h1><span class="empJobTitle">{{@key}}</h1>
                        <div class="row" style="margin: auto;">
                        {{#each jobs as |emp|}}
                            <div class="col-sm-3 d-flex justify-content-center">
                            <div class="card" style="width: 18rem">
                            <img class="card-img-top" src="/employee/give/{{emp.dataValues.id}}" alt="Card image cap" height="200">
                            <div class="card-body">
                                <h5 class="card-title"><span class="empName">{{emp.dataValues.name}}</span></h5>
                                <p class="card-text">
                                    <strong>{{emp.dataValues.jobTitle}}, Food Buff</strong> <br>
                                    Employee ID : <span class="empId">{{emp.dataValues.id}}</span> <br>
                                    Contact Info: <span class="empPhoneNumber"> {{emp.dataValues.phoneNumber}} </span> <br>
                                    Lives At: <span class="empResAdd"> {{emp.dataValues.resAdd}} </span> <br> <br>
                                    <button type="button" class="btn btn-primary updateEmp" data-toggle="modal" data-target="#updateEmployee"> Update </button>
                                    <button type="button" class="btn btn-primary deleteEmp" data-toggle="modal" data-target="#deleteEmployee"> Delete </button> 
                                </p>
                            </div>
                            </div>
                            </div>
                        {{/each}}
                        </div>
                    {{/each}}
            {{else}} 
                <h1>Hire Someone</h1>
            {{/if}}
            <br> <br>

            {{!-------------------------------------------------------- MODAL FOR UPDATE EMPLOYEE --------------------------------------------------}}

            <div class="modal fade" id="updateEmployee" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Update Employee Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/admin/updateEmployee" method="POST" enctype="multipart/form-data">
                        <strong>Employee Id: </strong><span id="updateShowEmpId"></span> <br>
                        {{#if salary}}
                            <select name="jobTitle" id="updateJobTitle" required>   {{!-- selected--}}
                                {{#each salary as |item|}}
                                    <option value="{{item.jobTitle}}">{{item.jobTitle}}</option>
                                {{/each}}
                                <option value="1" selected>hehe</option>
                            </select>
                        {{/if}}
                        <input type="number" name="id" placeholder="Employee Id" id="updateEmpId" hidden required>
                        <input type="text" name="name" placeholder="Name" id="updateEmpName" required>
                        <input type="tel" name="phoneNumber" placeholder="Contact Number" id="updateEmpPhoneNumber" required>
                        <input type="text" name="resAdd" placeholder="Address" id="updateEmpResAdd" required> 
                        <input type="file" name="empImage"> <br>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
            </div>
            {{!-----------------------------------------------------------------------------------------------------------------------------------}}

            {{!------------------------------------------------------- DELETE EMPLOYEE MODAL------------------------------------------------------}}
                <div class="modal fade" id="deleteEmployee" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">FIRE EMPLOYEE</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form action="/admin/removeEmployee" method="POST"> 
                            Are U sure that u want to <strong>FIRE</strong>
                            <strong><span id="deleteShowEmpId"></span>: <span id="deleteShowEmpName"></span></strong>
                            <br>
                            <input type="text" name="id" placeholder="Enter EmpID to confirm" required>
                            <button type="submit">DELETE</button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                    </div>
                </div>
                </div>
            {{!-----------------------------------------------------------------------------------------------------------------------------------------------}}

        </div>
        




        {{#if hideShow.jobs}} <div class="jobs show">  {{else}} <div class="jobs hide">{{/if}}
            {{!--------------------------------------------------------------------- ADD JOBS MODAL-------------------------------------------------------------}}
            <div id="mydiv">
                    <input type="text" id="filter1" onkeyup="filter_jobs()" placeholder="Search for jobs..">
                    <button id="add" data-toggle="modal" data-target="#addJob" class="btn btn-primary">ADD</button>
            </div>
            <div class="modal fade" id="addJob" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">ADD A JOB</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/admin/addJob" method="POST">
                        <input type="text" name="jobTitle" placeholder="Job Title" required>
                        <input type="number" name="salaryPm" placeholder="Salary P/M" required>
                        <input type="number" name="monthlyHours" placeholder="monthlyHours" required>
                        <input type="submit">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
            </div>
            {{!-----------------------------------------------------------------------------------------------------------------------------------------------}}


            {{#if salary}}
                <table align="center" class="table table-striped table-dark" id="jobs_table">
                    <thead>
                        <tr>
                            <th>Job Title</th>
                            <th>Salary Per Month</th>
                            <th>Monthly Hours</th>
                            <th>Update</th>
                            <th>Delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each salary as |item|}}
                            <tr>
                                <td>{{item.jobTitle}}</td>
                                <td>{{item.salaryPm}}</td>
                                <td>{{item.monthlyHours}}</td>
                                <td> <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#updateJob"> Update </button> </td>
                                <td> <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteJob"> Delete </button> </td>
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            {{else}} 
                <h1>Add Some Jobs</h1>
            {{/if}}

            {{!-------------------------------------------------------- MODAL FOR UPDATE JOB --------------------------------------------------}}

            <div class="modal fade" id="updateJob" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">UPDATE JOB DESCRIPTION</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h1>Update Job</h1>
                    <form action="/admin/updateJob" method="POST">
                        <input type="text" name="jobTitle" placeholder="Job Title" required> <br>
                        <input type="number" name="monthlyHours" placeholder="Monthly Hours" required>
                        <input type="number" name="salaryPm" placeholder="Salary P/M" required>
                        <input type="submit"> 
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
            </div>
            {{!-----------------------------------------------------------------------------------------------------------------------------------}}
            
            {{!----------------------------------------------------- DELETE JOB MODAL-------------------------------------------------------------}}
            <div class="modal fade" id="deleteJob" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">DELETE A JOB</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/admin/removeJob" method="POST">
                        <input type="text" name="jobTitle" required> 
                        Are U sure that u want to delete <span id="jobToBeDeleted"></span> Job
                    <button type="submit">DELETE</button>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
            </div>
        {{!-----------------------------------------------------------------------------------------------------------------------------------------------}}
        </div>
        






        {{#if hideShow.menu}} <div class="menu show"> {{else}} <div class="menu hide">{{/if}} 
            {{!--------------------------------------------------------------------- ADD IN MENU MODAL-------------------------------------------------------------}}
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addMenu">Add Menu</button>

            <div class="modal fade" id="addMenu" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">ADD FOOD ITEMS</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/admin/addMenu" method="POST" enctype="multipart/form-data">
                        <input type="text" name="itemName" placeholder="Item Name" required> <br>
                        <select name="itemType">
                            <option value="Starters">Starters</option>
                            <option value="Main Course">Main Course</option>
                            <option value="Dessert">Dessert</option>
                            <option value="Drinks">Drinks</option>
                        </select>
                        <input type="number" name="itemPrice" placeholder="Price" required>
                        <input type="file" name="itemImage" required>
                        <input type="submit"> 
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
            </div>
            {{!-----------------------------------------------------------------------------------------------------------------------------------------------}}


            {{#if menu}}
                {{#each menu as |type|}}
                    <h1>{{@key}}</h1>
                    <div class="row" style="margin: auto;">
                    {{#each type as |item|}}
                        <div class="col-sm-3 d-flex justify-content-center">
                            <div class="card" style="width: 18rem">
                                <img class="card-img-top" src="/food/give/{{item.dataValues.id}}" alt="Card image cap" height="200">
                                <div class="card-body">
                                    Item Id : {{item.dataValues.id}} <br>
                                    <h5 class="card-title"> {{item.dataValues.itemName}}</h5>
                                    <p class="card-text">
                                        Cost: <strong>Rs {{item.dataValues.itemPrice}}</strong> <br> <br>
                                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#updateMenu"> Update </button>
                                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#deleteMenu"> Delete </button>
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                    {{/each}}
                    </div>
                {{/each}}
            {{else}} 
                <h1>Add Some Items First</h1>
            {{/if}}

            {{!--------------------------------------------------------------------- UPDATE IN MENU MODAL-------------------------------------------------------------}}
            <div class="modal fade" id="updateMenu" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">UPDATE FOOD ITEM</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/admin/updateMenu" method="POST" enctype="multipart/form-data">
                        <input type="number" name="id" placeholder="Item Id" required> <br>
                        <input type="text" name="itemName" placeholder="Item Name" required> <br>
                        <select name="itemType">
                            <option value="Starters">Starters</option>
                            <option value="Main Course">Main Course</option>
                            <option value="Dessert">Dessert</option>
                            <option value="Drinks">Drinks</option>
                        </select>
                        <input type="number" name="itemPrice" placeholder="Price" required>
                        <input type="file" name="itemImage">
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
            </div>
            {{!-------------------------------------------------------------------------------------------------------------------------------------}}

            {{!-------------------------------------------------- DELETE FROM MENU MODAL-------------------------------------------------------------}}
            <div class="modal fade" id="deleteMenu" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">DELETE FOOD ITEM</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form action="/admin/removeMenu" method="POST">
                            Are U sure that u want to remove from menu!!
                            <input type="text" name="id" placeholder="Enter Item ID" required> 
                        <button class="btn btn-danger" type="submit">DELETE</button>

                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
            </div>
            {{!-----------------------------------------------------------------------------------------------------------------------------------------------}}

        </div>

        {{#if hideShow.customers}} <div class="customers show"> {{else}} <div class="customers hide">{{/if}}
            <div id="customers_div">
                    <input type="text" id="filter" onkeyup="filter_users()" placeholder="Search for users..">
            </div>
            <table id="customers_table" class="table table-striped table-dark">
                <thead>
                    <th>User ID</th>
                    <th>Name</th>
                    <th>Email ID</th>
                </thead>
            <tbody>
            {{#each customers as |item| }}
            <tr>
                <td>{{item.username}}</td>
                <td>{{item.name}}</td>
                <td>{{item.email}}</td>
            </tr>

            {{/each}}
            </tbody>

            </table>
            
        </div>

        {{#if hideShow.orders}} <div class="orders show"> {{else}} <div class="orders hide"> {{/if}}

            <table id="orders_table" class="table table-striped table-dark">
                <thead>
                    <th>Order ID</th>
                    <th>Ordered By</th>
                    <th>Date & Time</th>
                    <th>Order Data</th>
                    <th>Payment Amount</th>
                </thead>
                <tbody>
                    {{#each orders as |item| }}
                    <tr>
                        <td>{{item.orderId}}</td>
                        <td>{{item.username}}</td>
                        <td>{{item.createdAt}}</td>
                        <td> 
                            <ol>
                            {{#each item.orderData as |khaana|}}
                                <li>{{@key}} {{khaana}}</li>
                            {{/each}}
                            </ol>
                        </td>
                        <td>{{item.paymentAmount}}</td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>    
            
        </div>


    </div>
    
    <script src="../scripts/jquery.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js" integrity="sha384-LtrjvnR4Twt/qOuYxE721u19sVFLVSA4hf/rRt6PrZTmiPltdZcI7q7PXQBYTKyf" crossorigin="anonymous"></script>
    <script src="../scripts/admin.js"></script>
</body>
</html>
